{% extends 'academico/base.html' %}
{% block content %}

<!-- Cont. de H1-->
<div class="container my-3"> 
    {% if ativos %}
        <h1 class="text-center bg-secondary text-white py-2 shadow rounded">Lista de Usuários</h1>
    {% else %}
        <h1 class="text-center bg-secondary text-white py-2 shadow rounded">Lista de Usuários Inativos</h1>
    {% endif %}
</div> 

{% include 'academico/partials/_busca.html' %}

<!-- Cont. de Table-->
<div class="container"> 
    <table class="table table-striped table-hover rounded shadow">
        <tr class="table-dark">
            {% if ativos %}
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'nome' %}?busca={{ query }}">Nome</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'equipamento' %}?busca={{ query }}">Equipamento</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'genero' %}?busca={{ query }}">Gênero</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'escolaridade' %}?busca={{ query }}">Escolaridade</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'estado_civil' %}?busca={{ query }}">Estado Civil</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'data_nascimento' %}?busca={{ query }}">Nascimento</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios' 'telefone' %}?busca={{ query }}">Telefone</a></th>
                <th>Endereço</th>
                <th>Ações</th>
            {% else %}
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'nome' %}?busca={{ query }}">Nome</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'equipamento' %}?busca={{ query }}">Equipamento</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'genero' %}?busca={{ query }}">Gênero</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'escolaridade' %}?busca={{ query }}">Escolaridade</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'estado_civil' %}?busca={{ query }}">Estado Civil</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'data_nascimento' %}?busca={{ query }}">Nascimento</a></th>
                <th><a class="text-white" href="{% url 'ordenar_usuarios_inativos' 'telefone' %}?busca={{ query }}">Telefone</a></th>
                <th>Endereço</th>
                <th>Ativar</th>
            {% endif %}
        </tr>

        {% for usuario in usuarios %}
        <tr class="table-info">
            <td><a href="{% url 'detalhes_usuario' usuario.id %}">{{ usuario.nome }}</a></td>
            <td class="table-success">{{ usuario.equipamento }}</td>
            <td class="table-warning">{{ usuario.get_genero_display }}</td>
            <td>{{ usuario.get_escolaridade_display }}</td>
            <td>{{ usuario.get_estado_civil_display }}</td>
            <td>{{ usuario.data_nascimento|date:"d/m/Y" }}</td>
            <td>{{ usuario.telefone|default:"-" }}</td>
            <td>
                {{ usuario.rua|default:"" }} {{ usuario.numero|default:"" }}
                {% if usuario.complemento %}, {{ usuario.complemento }}{% endif %}<br>
                {{ usuario.bairro|default:"" }} - {{ usuario.cidade|default:"" }}
            </td>
            <td>
                {% if ativos %}
                    <a href="{% url 'editar_usuario' usuario.id %}" class="btn btn-info btn-sm">Editar</a>
                    <a href="{% url 'excluir_usuario' usuario.id %}" class="btn btn-danger btn-sm">Excluir</a>
                {% else %}
                    <a href="{% url 'ativar_usuario' usuario.id %}" class="btn btn-success btn-sm">Ativar</a>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="9" class="text-center">Nenhum usuário encontrado.</td>
        </tr>
        {% endfor %}
    </table>
</div>
<!-- Cont. de Table--> 

{% endblock %}
